(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{67:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return o})),r.d(t,"metadata",(function(){return i})),r.d(t,"rightToc",(function(){return l})),r.d(t,"default",(function(){return s}));var a=r(2),n=(r(0),r(96));const o={id:"comparator",title:"@build-tracker/comparator",sidebar_label:"@build-tracker/comparator"},i={unversionedId:"packages/comparator",id:"packages/comparator",isDocsHomePage:!1,title:"@build-tracker/comparator",description:"The Build Tracker Comparator contains the core functionality for calculating how two or more Builds differ. This package is only needed individually if you would like to do some custom reporting on various Builds.",source:"@site/docs/packages/comparator.md",slug:"/packages/comparator",permalink:"/docs/packages/comparator",editUrl:"https://github.com/paularmstrong/build-tracker/edit/main/docs/docs/packages/comparator.md",version:"current",sidebar_label:"@build-tracker/comparator",sidebar:"docs",previous:{title:"@build-tracker/cli",permalink:"/docs/packages/cli"},next:{title:"@build-tracker/formatting",permalink:"/docs/packages/formatting"}},l=[{value:"Install",id:"install",children:[]},{value:"class <code>BuildComparator</code>",id:"class-buildcomparator",children:[{value:"<code>constructor (ComparatorOptions)</code>",id:"constructor-comparatoroptions",children:[]},{value:"<code>toJSON(): ComparisonMatrix</code>",id:"tojson-comparisonmatrix",children:[]},{value:"<code>toMarkdown(FormattingOptions): string</code>",id:"tomarkdownformattingoptions-string",children:[]},{value:"Default Example",id:"default-example",children:[]},{value:"<code>toCsv(FormattingOptions): string</code>",id:"tocsvformattingoptions-string",children:[]},{value:"Default Example",id:"default-example-1",children:[]},{value:"<code>toSummary(useEmoji: boolean = true): Array&lt;string&gt;</code>",id:"tosummaryuseemoji-boolean--true-arraystring",children:[]}]},{value:"Types",id:"types",children:[{value:"<code>ComparisonMatrix</code>",id:"comparisonmatrix",children:[]},{value:"<code>ComparatorOptions</code>",id:"comparatoroptions",children:[]},{value:"<code>FormattingOptions</code>",id:"formattingoptions",children:[]},{value:"Formatters",id:"formatters",children:[]}]}],c={rightToc:l};function s({components:e,...t}){return Object(n.b)("wrapper",Object(a.a)({},c,t,{components:e,mdxType:"MDXLayout"}),Object(n.b)("p",null,"The Build Tracker Comparator contains the core functionality for calculating how two or more Builds differ. This package is only needed individually if you would like to do some custom reporting on various Builds."),Object(n.b)("h2",{id:"install"},"Install"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"yarn add @build-tracker/comparator@latest\n# or\nnpm install --save @build-tracker/comparator@latest\n")),Object(n.b)("h2",{id:"class-buildcomparator"},"class ",Object(n.b)("inlineCode",{parentName:"h2"},"BuildComparator")),Object(n.b)("p",null,"The following is a list of useful public methods for the ",Object(n.b)("inlineCode",{parentName:"p"},"BuildComparator")," class. More may be available."),Object(n.b)("h3",{id:"constructor-comparatoroptions"},Object(n.b)("inlineCode",{parentName:"h3"},"constructor (ComparatorOptions)")),Object(n.b)("p",null,"Construct a new ",Object(n.b)("inlineCode",{parentName:"p"},"BuildComparator")," instance."),Object(n.b)("h4",{id:"example"},"Example"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import Build from '@build-tracker/build';\nimport BuildComparator from '@build-tracker/comparator';\n\nnew BuildComparator({\n  builds: [\n    new Build(build1Meta, build1Artifacts),\n    new Build(build2Meta, build2Artifacts),\n    /* ... more than 2 builds can be added */\n  ],\n});\n")),Object(n.b)("h3",{id:"tojson-comparisonmatrix"},Object(n.b)("inlineCode",{parentName:"h3"},"toJSON(): ComparisonMatrix")),Object(n.b)("p",null,"Get a full JSON representation of a comparison matrix. This is typically used for constructing large user-interface tables, such as the one provided in the Build Tracker web app UI."),Object(n.b)("h3",{id:"tomarkdownformattingoptions-string"},Object(n.b)("inlineCode",{parentName:"h3"},"toMarkdown(FormattingOptions): string")),Object(n.b)("p",null,"Get a Markdown table represetnation of the comparison matrix. Post these, along with a ",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"#tosummaryuseemoji-boolean--true-arraystring"}),"summary"),", as pull request comments."),Object(n.b)("h3",{id:"default-example"},"Default Example"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{}),"|          |  1234567 |  8901234 |                   \u03941 |\n| :------- | -------: | -------: | -------------------: |\n| All      | 0.13 KiB | 0.16 KiB |     0.03 KiB (20.7%) |\n| churros  |    0 KiB | 0.12 KiB | \u26a0\ufe0f 0.12 KiB (100.0%) |\n| burritos | 0.09 KiB |    0 KiB |  -0.09 KiB (-100.0%) |\n| tacos    | 0.04 KiB | 0.04 KiB |     \ud83d\udea8 0 KiB (-4.4%) |\n")),Object(n.b)("h3",{id:"tocsvformattingoptions-string"},Object(n.b)("inlineCode",{parentName:"h3"},"toCsv(FormattingOptions): string")),Object(n.b)("p",null,"For old-school spreadsheet storage, export your comparison table as a CSV and import it into your favorite spreadsheet editor."),Object(n.b)("h3",{id:"default-example-1"},"Default Example"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csv"}),",1234567,8901234,\u03941\nAll,0.13 KiB,0.16 KiB,0.03 KiB (20.7%)\nchurros,0 KiB,0.12 KiB,0.12 KiB (100.0%)\nburritos,0.09 KiB,0 KiB,-0.09 KiB (-100.0%)\ntacos,0.04 KiB,0.04 KiB,0 KiB (-4.4%)\n")),Object(n.b)("h3",{id:"tosummaryuseemoji-boolean--true-arraystring"},Object(n.b)("inlineCode",{parentName:"h3"},"toSummary(useEmoji: boolean = true): Array<string>")),Object(n.b)("p",null,"Returns an array Markdown-formatted summaries of the overall comparison and any budgets that you have defined."),Object(n.b)("h4",{id:"no-failures"},"No failures:"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"['\u2705 No failing budgets'];\n")),Object(n.b)("h4",{id:"warnings-and-errors"},"Warnings and Errors:"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"[\n  '\u26a0\ufe0f: `Group \\\\\"All\\\\\"` failed the gzip budget size limit of 0 KiB by 0.16 KiB',\n  '\u26a0\ufe0f: `Group \\\\\"warning\\\\\"` failed the gzip budget size limit of 0 KiB by 0.12 KiB',\n  '\ud83d\udea8: `Group \\\\\"error\\\\\"` failed the gzip budget size limit of 0 KiB by 0.16 KiB',\n  '#\ufe0f\u20e3: `burritos` hash changed without any file size change',\n];\n")),Object(n.b)("p",null,"If ",Object(n.b)("inlineCode",{parentName:"p"},"useEmoji")," is set to ",Object(n.b)("inlineCode",{parentName:"p"},"false"),", emoji will be replaced with words:"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Emoji"),Object(n.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Word"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u2705 (U+2705)"),Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Success")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\u26a0\ufe0f (U+26A0)"),Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Warning")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"\ud83d\udea8 (U+1F6A9)"),Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Error")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"#\ufe0f\u20e3 (U+0023-20E3)"),Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Hash")))),Object(n.b)("h2",{id:"types"},"Types"),Object(n.b)("p",null,"NOTE: Cell types have been omitted. Please refer to the source code to get the full type definitions."),Object(n.b)("h3",{id:"comparisonmatrix"},Object(n.b)("inlineCode",{parentName:"h3"},"ComparisonMatrix")),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"interface ComparisonMatrix {\n  header: HeaderRow;\n  groups: Array<GroupRow>;\n  artifacts: Array<ArtifactRow>;\n}\n")),Object(n.b)("h3",{id:"comparatoroptions"},Object(n.b)("inlineCode",{parentName:"h3"},"ComparatorOptions")),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"interface ComparatorOptions {\n  artifactBudgets?: ArtifactBudgets;\n  artifactFilters?: Array<RegExp>;\n  budgets?: Array<Budget>;\n  builds: Array<Build>;\n  groups?: Array<Group>;\n}\n")),Object(n.b)("h3",{id:"formattingoptions"},Object(n.b)("inlineCode",{parentName:"h3"},"FormattingOptions")),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"interface FormattingOptions {\n  formatCellText?: CellTextStringFormatter;\n  formatRevision?: RevisionStringFormatter;\n  formatRevisionDelta?: RevisionDeltaStringFormatter;\n  formatTotal?: TotalStringFormatter;\n  formatDelta?: DeltaStringFormatter;\n  artifactFilter?: ArtifactFilter;\n  sizeKey?: string;\n}\n")),Object(n.b)("h3",{id:"formatters"},"Formatters"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"type CellTextStringFormatter = (cell: TextCell | GroupCell | ArtifactCell) => string;\ntype RevisionStringFormatter = (cell: RevisionCell) => string;\ntype RevisionDeltaStringFormatter = (cell: RevisionDeltaCell) => string;\ntype TotalStringFormatter = (cell: TotalCell, sizeKey: string) => string;\ntype DeltaStringFormatter = (cell: DeltaCell | TotalDeltaCell, sizeKey: string) => string;\ntype ArtifactFilter = (row: ArtifactRow) => boolean;\n")))}s.isMDXComponent=!0},96:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return m}));var a=r(0),n=r.n(a);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=n.a.createContext({}),b=function(e){var t=n.a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=b(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},u=n.a.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(r),u=a,m=p["".concat(i,".").concat(u)]||p[u]||d[u]||o;return r?n.a.createElement(m,l(l({ref:t},s),{},{components:r})):n.a.createElement(m,l({ref:t},s))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=r[s];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,r)}u.displayName="MDXCreateElement"}}]);